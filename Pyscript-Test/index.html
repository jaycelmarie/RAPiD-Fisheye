<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="src/pyscript.css">
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <title>Fisheye Algorithm</title> 
</head>
<body>

    <div class="container">
        
        <h1>Menu</h1>

        <!-- Open Camera -->
        <button type="button" id="openCam">CAMERA</button>
        <py-script>
            from js import document
            from pyodide import create_proxy

            def openCamera(self):
                print("You have chosen to Open Camera.")
            
            camera_proxy = create_proxy(openCamera)

            document.getElementById("openCam").addEventListener("click", camera_proxy)
        </py-script>

        <!-- Select RAPID weight Image Button -->
        <button type="button" id="rapid">RAPID</button>
        <py-script>
            from js import document
            from pyodide import create_proxy

            def rapidImg(self):
                # Initialize detector
                detector = Detector(model_name='rapid',
                                    weights_path='./weights/pL1_MWHB1024_Mar11_4000.ckpt',
                                    use_cuda=False)
            
                read_img = easygui.fileopenbox(filetypes=["*.jpg","*.jpeg","*.png"])
                
                # A simple example to run on a single image and plt.imshow() it
                detector.detect_one(img_path=read_img,
                                    input_size=1024, conf_thres=0.3,
                                    visualize=True)
            
            rapid_proxy = create_proxy(rapidImg)

            document.getElementById("rapid").addEventListener("click", rapid_proxy)
        </py-script>

        <!-- Select RAPID-FA weight Image Button -->
        <button type="button" id="rapidFA">RAPID-FA</button>
        <py-script>
            from js import document
            from pyodide import create_proxy

            def rapidFAImg(self):
                print("You have chosen to Select a RAPIDFA image weight.")
            
            rapidFA_proxy = create_proxy(rapidFAImg)

            document.getElementById("rapidFA").addEventListener("click", rapidFA_proxy)
        </py-script>

        <!-- Select RAPID-FGFA weight Image Button -->
        <button type="button" id="rapidFGFA">RAPID-FGFA</button>
        <py-script>
            from js import document
            from pyodide import create_proxy
    
            def rapidFGFAImg(self):
                print("You have chosen to Select a RAPID-FGFA image weight.")
            
            rapidFGFA_proxy = create_proxy(rapidFGFAImg)
    
            document.getElementById("rapidFGFA").addEventListener("click", rapidFGFA_proxy)
        </py-script>

    </div>
</body>
</html>